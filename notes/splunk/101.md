# terminology
- indexer: process incoming data and store in indexes as events
- search head: allows user to use SPL to search in indexes. distribute search requests to indexers. consolidate result fields. provide visualization
- forwarder: forwards data to indexers, with small amount of pre-processing
- deployment server: 
- cluster master:
- license master:

# scaling 
- single instance to enterprise deployment
   - input: multiple forwarders
   - parsing
   - indexing: index cluster (replication or non-replication)
   - searching: 
       - search head cluster (min. 3)
       - no need fast throughput/disk space
       - needs more CPU power
       - rule of thumb: 1 core per user
- virtual machines
    - indexer and search heads needs 100% vCPU. and memory reserved.
    - disks: capable of 1200+ seeks per second
    - strongly recommends dedicated storage per indexer

# process
- splunkd
    - tcp 8090, ssl
    - accesses, processes, indexes incoming data
    - handles search requests and returns results
    - spawns and controls all child processes
        - scripted inputs
        - scripted alerts
        - KV store
          - port 8191
        - Splunk introspection services
        - Splunk Web
            - port 8000: the frontend
            - port 8090: rest api
            - port 8065: application server, bound on loopback

# installation
- open necessary ports
  - 8000 & 8090
  - 9997 (forwarder)
- cli
```commandline
./splunk start --accept
./splunk stop
./splunk restart
./splunk help
```
- adjust ulimit and turn off transparent huge pages
  - https://docs.splunk.com/Documentation/Splunk/latest/Troubleshooting/ulimitErrors
  - https://docs.splunk.com/Documentation/Splunk/latest/ReleaseNotes/SplunkandTHP

# directory structure
- `/bin`: the executables
- `/etc/apps/search/*.conf`: config files
- `/var/lib`: splunk_db

## important conf files
- `props.conf`: setting process properties
- `transforms.conf`: how data is transformed